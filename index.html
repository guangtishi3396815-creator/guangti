<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seedance 2.0 ç”µå½±çº§æç¤ºè¯æ™ºèƒ½ä½“ - AIå¢å¼ºç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
            padding-bottom: 40px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 30px 0;
        }

        header h1 {
            font-size: 2.2rem;
            background: linear-gradient(90deg, #e94560, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        header p {
            color: #8892b0;
            font-size: 1rem;
        }

        .ai-analyze-section {
            background: linear-gradient(135deg, rgba(233, 69, 96, 0.15), rgba(255, 107, 107, 0.1));
            border: 2px solid rgba(233, 69, 96, 0.4);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .ai-analyze-section h2 {
            color: #e94560;
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-analyze-section h2::before {
            content: "âœ¨";
        }

        .analyze-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(90deg, #e94560, #ff6b6b);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .analyze-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(233, 69, 96, 0.4);
        }

        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .analyze-result {
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            border-left: 4px solid #4ade80;
        }

        .analyze-result h4 {
            color: #4ade80;
            margin-bottom: 15px;
            font-size: 0.95rem;
        }

        .analyze-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 12px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .analyze-item .icon {
            font-size: 1.2rem;
        }

        .analyze-item .content {
            flex: 1;
        }

        .analyze-item .label {
            color: #8892b0;
            font-size: 0.8rem;
            margin-bottom: 4px;
        }

        .analyze-item .value {
            color: #ccd6f6;
            font-size: 0.9rem;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .panel h2 {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #e94560;
        }

        .form-group {
            margin-bottom: 18px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #ccd6f6;
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 16px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #fff;
            font-size: 0.95rem;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #e94560;
            background: rgba(0, 0, 0, 0.5);
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .template-grid-12 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .template-grid-12 {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .template-btn-12 {
            padding: 12px 8px;
            background: rgba(233, 69, 96, 0.1);
            border: 1px solid rgba(233, 69, 96, 0.3);
            border-radius: 10px;
            color: #e94560;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .template-btn-12:hover,
        .template-btn-12.active {
            background: linear-gradient(135deg, rgba(233, 69, 96, 0.4), rgba(255, 107, 107, 0.3));
            border-color: #e94560;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(233, 69, 96, 0.2);
        }

        .tag-section {
            margin-bottom: 18px;
        }

        .tag-section h3 {
            font-size: 0.85rem;
            color: #8892b0;
            margin-bottom: 10px;
        }

        .tag-list {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .tag {
            padding: 5px 10px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tag:hover,
        .tag.active {
            background: rgba(233, 69, 96, 0.3);
            border-color: #e94560;
            color: #e94560;
        }

        .tag.ai-selected {
            background: rgba(74, 222, 128, 0.2);
            border-color: #4ade80;
            color: #4ade80;
        }

        .generate-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(90deg, #e94560, #ff6b6b);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 15px;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(233, 69, 96, 0.3);
        }

        .copy-btn {
            padding: 6px 12px;
            background: rgba(233, 69, 96, 0.2);
            border: 1px solid rgba(233, 69, 96, 0.4);
            border-radius: 6px;
            color: #e94560;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .copy-btn:hover {
            background: rgba(233, 69, 96, 0.4);
        }

        .output-section {
            margin-top: 18px;
        }

        .output-box {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            line-height: 1.6;
            max-height: 180px;
            overflow-y: auto;
        }

        .output-box pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            color: #ccd6f6;
        }

        .storyboard {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        .shot {
            display: flex;
            gap: 12px;
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .shot:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .shot-number {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #e94560, #ff6b6b);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .shot-content {
            flex: 1;
        }

        .shot-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .shot-type {
            color: #e94560;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .shot-duration {
            color: #8892b0;
            font-size: 0.75rem;
        }

        .shot-script {
            color: #ccd6f6;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
            border-left: 3px solid #e94560;
        }

        .shot-tech {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            font-size: 0.8rem;
        }

        .shot-tech span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 20px;
            color: #8892b0;
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(233, 69, 96, 0.3);
            border-top-color: #e94560;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .tips-box {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 8px;
            padding: 12px;
            margin-top: 15px;
            font-size: 0.8rem;
            color: #60a5fa;
        }

        .tips-box strong {
            color: #93c5fd;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¬ Seedance 2.0 ç”µå½±çº§æç¤ºè¯æ™ºèƒ½ä½“</h1>
            <p>AI æ™ºèƒ½åˆ†æ + ä¸“ä¸šåˆ†é•œè„šæœ¬ | ç”µå½±çº§ / çºªå½•ç‰‡ / MV ä¸“ç”¨</p>
        </header>

        <!-- AI æ™ºèƒ½åˆ†æåŒºåŸŸ -->
        <div class="ai-analyze-section">
            <h2>AI æ™ºèƒ½åœºæ™¯åˆ†æ</h2>
            <div class="form-group">
                <label>è¾“å…¥åœºæ™¯æè¿°ï¼ŒAI å°†è‡ªåŠ¨åˆ†æå¹¶æ¨èæœ€ä½³é•œå¤´ã€å…‰å½±å’Œè‰²å½©æ–¹æ¡ˆ</label>
                <textarea id="scene-desc" placeholder="ä¾‹å¦‚ï¼šä¸€ä¸ªå­¤ç‹¬çš„å®‡èˆªå‘˜ç«™åœ¨ç«æ˜Ÿæ‚¬å´–è¾¹ï¼Œæœ›ç€è¿œå¤„è“è‰²çš„åœ°çƒï¼Œçº¢è‰²çš„æ²™å°˜åœ¨é£ä¸­é£èˆï¼Œæ—¥è½æ—¶åˆ†..."></textarea>
            </div>
            <button class="analyze-btn" id="analyze-btn" onclick="analyzeScene()">
                <span>ğŸ¤–</span>
                <span>AI æ·±åº¦åˆ†æåœºæ™¯</span>
            </button>
            
            <div id="analyze-loading" style="display: none;">
                <div class="loading">
                    <div class="spinner"></div>
                    <span>AI æ­£åœ¨åˆ†æåœºæ™¯æ°›å›´ã€æƒ…æ„ŸåŸºè°ƒã€è§†è§‰é£æ ¼...è¯·ç¨å€™</span>
                </div>
            </div>
            
            <div id="analyze-result" style="display: none;">
                <!-- AI åˆ†æç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
            </div>
        </div>

        <div class="main-grid">
            <!-- å·¦ä¾§ï¼šå‚æ•°é¢æ¿ -->
            <div class="panel">
                <h2>ğŸ›ï¸ æ‹æ‘„å‚æ•°</h2>

                <div class="template-grid-12">
                    <button class="template-btn-12" onclick="loadTemplate('sci_fi_epic')">ğŸš€ ç§‘å¹»å²è¯—</button>
                    <button class="template-btn-12" onclick="loadTemplate('cyberpunk_night')">ğŸŒƒ èµ›åšæœ‹å…‹</button>
                    <button class="template-btn-12" onclick="loadTemplate('documentary_nature')">ğŸ¦ çºªå½•ç‰‡</button>
                    <button class="template-btn-12" onclick="loadTemplate('music_video_dance')">ğŸ’ƒ MVèˆè¹ˆ</button>
                    <button class="template-btn-12" onclick="loadTemplate('romantic_drama')">ğŸ’• æµªæ¼«å‰§æƒ…</button>
                    <button class="template-btn-12" onclick="loadTemplate('horror_thriller')">ğŸ‘» ææ€–æƒŠæ‚š</button>
                    <button class="template-btn-12" onclick="loadTemplate('action_sequence')">ğŸ’¥ åŠ¨ä½œåœºé¢</button>
                    <button class="template-btn-12" onclick="loadTemplate('period_drama')">ğŸ›ï¸ å¹´ä»£å‰§</button>
                    <button class="template-btn-12" onclick="loadTemplate('underwater_world')">ğŸ  æ°´ä¸‹ä¸–ç•Œ</button>
                    <button class="template-btn-12" onclick="loadTemplate('space_odyssey')">ğŸŒŒ å¤ªç©ºæ¼«æ¸¸</button>
                    <button class="template-btn-12" onclick="loadTemplate('fantasy_magic')">ğŸ§™ å¥‡å¹»é­”æ³•</button>
                    <button class="template-btn-12" onclick="loadTemplate('noir_detective')">ğŸ•µï¸ é»‘è‰²ä¾¦æ¢</button>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>è§†é¢‘æ—¶é•¿</label>
                        <select id="duration">
                            <option value="5">5ç§’</option>
                            <option value="10" selected>10ç§’</option>
                            <option value="15">15ç§’</option>
                            <option value="30">30ç§’</option>
                            <option value="60">60ç§’</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ç”»é¢æ¯”ä¾‹</label>
                        <select id="aspect-ratio">
                            <option value="16:9" selected>16:9 ç”µå½±</option>
                            <option value="9:16">9:16 ç«–å±</option>
                            <option value="1:1">1:1 æ–¹å½¢</option>
                            <option value="2.39:1">2.39:1 å®½é“¶å¹•</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>æƒ…ç»ªæ°›å›´</label>
                    <select id="mood">
                        <option value="epic">å²è¯— / å®å¤§</option>
                        <option value="mysterious">ç¥ç§˜ / æ‚¬ç–‘</option>
                        <option value="romantic">æµªæ¼« / æ¸©æƒ…</option>
                        <option value="dark">æš—é»‘ / å‹æŠ‘</option>
                        <option value="powerful">éœ‡æ’¼ / å†²å‡»</option>
                        <option value="warm">æ¸©æš– / æ²»æ„ˆ</option>
                        <option value="melancholic">å¿§éƒ / ä¼¤æ„Ÿ</option>
                        <option value="tense">ç´§å¼  / åˆºæ¿€</option>
                        <option value="dreamy">æ¢¦å¹» / è¶…ç°å®</option>
                        <option value="energetic">æ´»åŠ› / åŠ¨æ„Ÿ</option>
                    </select>
                </div>

                <div class="tag-section">
                    <h3>ğŸ¥ é•œå¤´è¯­è¨€ï¼ˆç‚¹å‡»é€‰æ‹©å¤šä¸ªï¼‰</h3>
                    <div class="tag-list" id="lens-tags">
                        <span class="tag" data-en="wide_shot">å…¨æ™¯</span>
                        <span class="tag" data-en="close_up">ç‰¹å†™</span>
                        <span class="tag" data-en="extreme_close_up">æç‰¹å†™</span>
                        <span class="tag" data-en="medium_shot">ä¸­æ™¯</span>
                        <span class="tag" data-en="tracking">è·Ÿè¸ª</span>
                        <span class="tag" data-en="dolly_in">æ¨è½¨</span>
                        <span class="tag" data-en="crane_shot">æ‘‡è‡‚</span>
                        <span class="tag" data-en="handheld">æ‰‹æŒ</span>
                        <span class="tag" data-en="aerial_shot">èˆªæ‹</span>
                        <span class="tag" data-en="steadicam">æ–¯å¦å°¼åº·</span>
                        <span class="tag" data-en="over_shoulder">è¿‡è‚©</span>
                        <span class="tag" data-en="point_of_view">ä¸»è§‚è§†è§’</span>
                    </div>
                </div>

                <div class="tag-section">
                    <h3>ğŸ’¡ å…‰å½±æ•ˆæœ</h3>
                    <div class="tag-list" id="light-tags">
                        <span class="tag" data-en="cinematic_lighting">ç”µå½±å…‰</span>
                        <span class="tag" data-en="golden_hour">é»„é‡‘æ—¶åˆ»</span>
                        <span class="tag" data-en="blue_hour">è“è°ƒæ—¶åˆ»</span>
                        <span class="tag" data-en="neon_light">éœ“è™¹å…‰</span>
                        <span class="tag" data-en="volumetric_light">ä½“ç§¯å…‰</span>
                        <span class="tag" data-en="rim_light">è½®å»“å…‰</span>
                        <span class="tag" data-en="natural_light">è‡ªç„¶å…‰</span>
                        <span class="tag" data-en="soft_light">æŸ”å…‰</span>
                        <span class="tag" data-en="hard_light">ç¡¬å…‰</span>
                        <span class="tag" data-en="chiaroscuro">æ˜æš—å¯¹æ¯”</span>
                        <span class="tag" data-en="god_rays">ä¸Šå¸ä¹‹å…‰</span>
                        <span class="tag" data-en="practical_light">å®æ™¯å…‰æº</span>
                    </div>
                </div>

                <div class="tag-section">
                    <h3>ğŸ¨ è‰²å½©é£æ ¼</h3>
                    <div class="tag-list" id="color-tags">
                        <span class="tag" data-en="teal_orange">é’æ©™è‰²è°ƒ</span>
                        <span class="tag" data-en="orange_teal">æ©™é’è‰²è°ƒ</span>
                        <span class="tag" data-en="film_grain">èƒ¶ç‰‡é¢—ç²’</span>
                        <span class="tag" data-en="high_contrast">é«˜å¯¹æ¯”</span>
                        <span class="tag" data-en="low_contrast">ä½å¯¹æ¯”</span>
                        <span class="tag" data-en="desaturated">ä½é¥±å’Œ</span>
                        <span class="tag" data-en="vibrant">é²œè‰³é¥±å’Œ</span>
                        <span class="tag" data-en="warm_tones">æš–è‰²è°ƒ</span>
                        <span class="tag" data-en="cool_tones">å†·è‰²è°ƒ</span>
                        <span class="tag" data-en="monochrome">é»‘ç™½</span>
                        <span class="tag" data-en="sepia">å¤å¤ sepia</span>
                        <span class="tag" data-en="cyberpunk_neon">èµ›åšéœ“è™¹</span>
                    </div>
                </div>

                <button class="generate-btn" onclick="generatePrompt()">
                    ğŸš€ ç”Ÿæˆç”µå½±çº§æç¤ºè¯ & åˆ†é•œè„šæœ¬
                </button>

                <div class="tips-box">
                    <strong>ğŸ’¡ æç¤ºï¼š</strong>å…ˆä½¿ç”¨ AI åˆ†æåŠŸèƒ½è‡ªåŠ¨åŒ¹é…å‚æ•°ï¼Œæˆ–æ‰‹åŠ¨é€‰æ‹©æ ‡ç­¾ï¼Œç„¶åç‚¹å‡»ç”ŸæˆæŒ‰é’®è·å–å®Œæ•´æç¤ºè¯å’Œåˆ†é•œè„šæœ¬ã€‚
                </div>
            </div>

            <!-- å³ä¾§ï¼šè¾“å‡ºé¢æ¿ -->
            <div class="panel">
                <h2>ğŸ¬ ç”Ÿæˆç»“æœ</h2>

                <div class="output-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <span style="color: #8892b0; font-size: 0.85rem;">æ­£æç¤ºè¯</span>
                        <button class="copy-btn" onclick="copyText('positive-output')">ğŸ“‹ å¤åˆ¶</button>
                    </div>
                    <div class="output-box">
                        <pre id="positive-output">ç‚¹å‡»ç”ŸæˆæŒ‰é’®åˆ›å»ºæç¤ºè¯...</pre>
                    </div>
                </div>

                <div class="output-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <span style="color: #8892b0; font-size: 0.85rem;">è´Ÿæç¤ºè¯</span>
                        <button class="copy-btn" onclick="copyText('negative-output')">ğŸ“‹ å¤åˆ¶</button>
                    </div>
                    <div class="output-box">
                        <pre id="negative-output"> blurry, low quality, distorted, deformed, bad anatomy, watermark, text, logo, cropped, out of frame, worst quality, low resolution, oversaturated, underexposed, overexposed, cartoon, anime, painting, 3d render, cgi</pre>
                    </div>
                </div>

                <div class="output-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span style="color: #8892b0; font-size: 0.9rem;">ğŸ¬ æ™ºèƒ½åˆ†é•œè„šæœ¬</span>
                        <button class="copy-btn" onclick="copyStoryboard()">ğŸ“‹ å¤åˆ¶å…¨éƒ¨</button>
                    </div>
                    <div class="storyboard" id="storyboard">
                        <div style="color: #8892b0; text-align: center; padding: 40px;">
                            ç‚¹å‡»"ç”Ÿæˆ"æŒ‰é’®åˆ›å»ºåˆ†é•œè„šæœ¬...
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== AI åœºæ™¯åˆ†æå¼•æ“ ==========
        
        const sceneAnalyzer = {
            // å…³é”®è¯åŒ¹é…è§„åˆ™
            rules: {
                // åœºæ™¯ç±»å‹
                sciFi: ['å¤ªç©º', 'å®‡å®™', 'æ˜Ÿçƒ', 'å®‡èˆªå‘˜', 'é£èˆ¹', 'æœªæ¥', 'ç§‘æŠ€', 'æœºæ¢°', 'æœºå™¨äºº', 'å¤–æ˜Ÿ', 'ç«æ˜Ÿ', 'æœˆçƒ'],
                cyberpunk: ['èµ›åš', 'éœ“è™¹', 'é›¨å¤œ', 'åŸå¸‚', 'é«˜æ¥¼', 'æœªæ¥éƒ½å¸‚', 'é»‘å®¢', 'ä¹‰ä½“', 'å…¨æ¯', 'å¹¿å‘Šç‰Œ'],
                nature: ['æ£®æ—', 'å±±è„‰', 'æµ·æ´‹', 'è‰åŸ', 'åŠ¨ç‰©', 'æ—¥è½', 'æ—¥å‡º', 'é£æ™¯', 'è‡ªç„¶', 'é‡ç”ŸåŠ¨ç‰©'],
                romance: ['æƒ…ä¾£', 'çˆ±æƒ…', 'æµªæ¼«', 'å©šç¤¼', 'æ‹¥æŠ±', 'æ¥å»', 'å¤•é˜³', 'æµ·è¾¹', 'çº¦ä¼š'],
                horror: ['ææ€–', 'é¬¼', 'é»‘æš—', 'åºŸå¼ƒ', 'è¡€è…¥', 'æƒŠæ‚š', 'æ€ªç‰©', 'é˜´æ£®', 'å°–å«'],
                action: ['è¿½é€', 'æ‰“æ–—', 'çˆ†ç‚¸', 'æªæˆ˜', 'æ±½è½¦', 'é€Ÿåº¦', 'æˆ˜æ–—', 'ç‰¹å·¥', 'è‹±é›„'],
                underwater: ['æ°´ä¸‹', 'æµ·åº•', 'æ½œæ°´', 'çŠç‘š', 'é±¼ç¾¤', 'æµ·æ´‹æ·±å¤„'],
                fantasy: ['é­”æ³•', 'å¥‡å¹»', 'é¾™', 'ç²¾çµ', 'åŸå ¡', 'ä¸­ä¸–çºª', 'å·«å¸ˆ', 'ç¥è¯']
            },
            
            // é•œå¤´æ¨èæ˜ å°„
            lensRecommendations: {
                sciFi: ['wide_shot', 'aerial_shot', 'tracking'],
                cyberpunk: ['tracking', 'medium_shot', 'neon_light'],
                nature: ['wide_shot', 'aerial_shot', 'close_up'],
                romance: ['close_up', 'medium_shot', 'dolly_in'],
                horror: ['handheld', 'close_up', 'extreme_close_up'],
                action: ['tracking', 'handheld', 'wide_shot'],
                underwater: ['wide_shot', 'tracking', 'close_up'],
                fantasy: ['wide_shot', 'crane_shot', 'aerial_shot']
            },
            
            // å…‰å½±æ¨èæ˜ å°„
            lightRecommendations: {
                sciFi: ['cinematic_lighting', 'volumetric_light', 'rim_light'],
                cyberpunk: ['neon_light', 'practical_light', 'hard_light'],
                nature: ['golden_hour', 'natural_light', 'soft_light'],
                romance: ['golden_hour', 'soft_light', 'warm_tones'],
                horror: ['chiaroscuro', 'hard_light', 'practical_light'],
                action: ['hard_light', 'practical_light', 'god_rays'],
                underwater: ['volumetric_light', 'natural_light', 'god_rays'],
                fantasy: ['god_rays', 'volumetric_light', 'soft_light']
            },
            
            // è‰²å½©æ¨èæ˜ å°„
            colorRecommendations: {
                sciFi: ['teal_orange', 'cool_tones', 'high_contrast'],
                cyberpunk: ['cyberpunk_neon', 'high_contrast', 'vibrant'],
                nature: ['warm_tones', 'vibrant', 'film_grain'],
                romance: ['warm_tones', 'soft_light', 'film_grain'],
                horror: ['desaturated', 'high_contrast', 'monochrome'],
                action: ['orange_teal', 'high_contrast', 'vibrant'],
                underwater: ['cool_tones', 'blue_hour', 'vibrant'],
                fantasy: ['warm_tones', 'vibrant', 'golden_hour']
            },
            
            // æƒ…ç»ªæ˜ å°„
            moodMapping: {
                sciFi: 'epic',
                cyberpunk: 'mysterious',
                nature: 'warm',
                romance: 'romantic',
                horror: 'dark',
                action: 'powerful',
                underwater: 'mysterious',
                fantasy: 'dreamy'
            },

            analyze(sceneDesc) {
                const desc = sceneDesc.toLowerCase();
                let scores = {};
                
                // è®¡ç®—å„ç±»å‹åŒ¹é…åº¦
                for (let [type, keywords] of Object.entries(this.rules)) {
                    scores[type] = keywords.reduce((score, keyword) => {
                        return desc.includes(keyword) ? score + 1 : score;
                    }, 0);
                }
                
                // æ‰¾å‡ºæœ€åŒ¹é…çš„ç±»å‹
                let bestMatch = Object.entries(scores).sort((a, b) => b[1] - a[1])[0];
                let sceneType = bestMatch[1] > 0 ? bestMatch[0] : 'nature';
                
                // æ£€æµ‹é¢å¤–ç‰¹å¾
                let features = this.detectFeatures(desc);
                
                return {
                    sceneType,
                    sceneTypeName: this.getSceneTypeName(sceneType),
                    confidence: Math.min(bestMatch[1] * 20, 95),
                    lens: this.lensRecommendations[sceneType] || ['wide_shot'],
                    light: this.lightRecommendations[sceneType] || ['cinematic_lighting'],
                    color: this.colorRecommendations[sceneType] || ['teal_orange'],
                    mood: this.moodMapping[sceneType] || 'epic',
                    features,
                    analysis: this.generateAnalysis(sceneType, features, desc)
                };
            },
            
            detectFeatures(desc) {
                let features = [];
                if (desc.includes('é›¨') || desc.includes('rain')) features.push('rain');
                if (desc.includes('é›¾') || desc.includes('fog')) features.push('fog');
                if (desc.includes('é›ª') || desc.includes('snow')) features.push('snow');
                if (desc.includes('é£') || desc.includes('wind')) features.push('wind');
                if (desc.includes('ç«') || desc.includes('fire')) features.push('fire');
                if (desc.includes('æ°´') || desc.includes('water')) features.push('water');
                if (desc.includes('å¤œæ™š') || desc.includes('night')) features.push('night');
                if (desc.includes('æ—¥è½') || desc.includes('sunset')) features.push('sunset');
                if (desc.includes('å®¤å†…') || desc.includes('å®¤å†…')) features.push('indoor');
                return features;
            },
            
            getSceneTypeName(type) {
                const names = {
                    sciFi: 'ç§‘å¹»å¤ªç©º', cyberpunk: 'èµ›åšæœ‹å…‹', nature: 'è‡ªç„¶é£å…‰',
                    romance: 'æµªæ¼«çˆ±æƒ…', horror: 'ææ€–æƒŠæ‚š', action: 'åŠ¨ä½œåœºé¢',
                    underwater: 'æ°´ä¸‹ä¸–ç•Œ', fantasy: 'å¥‡å¹»é­”æ³•'
                };
                return names[type] || 'é€šç”¨åœºæ™¯';
            },
            
            generateAnalysis(type, features, desc) {
                let analyses = {
                    sciFi: 'åœºæ™¯å…·æœ‰å¼ºçƒˆçš„æœªæ¥æ„Ÿå’Œç§‘æŠ€å…ƒç´ ï¼Œå»ºè®®ä½¿ç”¨å¹¿è§’é•œå¤´å±•ç°åœºæ™¯å®å¤§æ„Ÿï¼Œå†·è‰²è°ƒé…åˆä½“ç§¯å…‰è¥é€ å¤ªç©º/æœªæ¥æ°›å›´',
                    cyberpunk: 'éœ“è™¹ç¯å’Œé«˜å¯¹æ¯”åº¦æ˜¯æ ¸å¿ƒè§†è§‰å…ƒç´ ï¼Œå»ºè®®ä½¿ç”¨è·Ÿè¸ªé•œå¤´å¢å¼ºåŠ¨æ„Ÿï¼Œéœ“è™¹å…‰é…åˆé’ç´«è‰²è°ƒ',
                    nature: 'è‡ªç„¶é£å…‰å¼ºè°ƒçœŸå®æ„Ÿå’Œç¾æ„Ÿï¼Œé»„é‡‘æ—¶åˆ»å…‰çº¿é…åˆé•¿ç„¦é•œå¤´æ•æ‰ç»†èŠ‚ï¼Œæš–è‰²è°ƒå¢å¼ºäº²å’ŒåŠ›',
                    romance: 'æƒ…æ„Ÿè¡¨è¾¾éœ€è¦æŸ”å’Œå…‰çº¿å’Œæµ…æ™¯æ·±ï¼Œç‰¹å†™é•œå¤´æ•æ‰æƒ…ç»ªï¼Œæš–è‰²è°ƒè¥é€ æµªæ¼«æ°›å›´',
                    horror: 'ææ€–æ°›å›´ä¾èµ–é˜´å½±å’ŒæœªçŸ¥æ„Ÿï¼Œæ‰‹æŒæ‘„å½±å¢å¼ºçœŸå®æ„Ÿï¼Œé«˜å¯¹æ¯”ä½é¥±å’Œè¥é€ ä¸å®‰',
                    action: 'é€Ÿåº¦æ„Ÿå’Œå†²å‡»åŠ›æ˜¯å…³é”®ï¼Œå¹¿è§’é•œå¤´å±•ç°åœºé¢ï¼Œç¡¬å…‰å¢å¼ºåŠ›é‡æ„Ÿ',
                    underwater: 'æ°´ä¸‹å…‰çº¿æ•£å°„ç‰¹æ€§éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œå»ºè®®ä½¿ç”¨ä½“ç§¯å…‰è¡¨ç°å…‰çº¿ç©¿é€æ°´ä½“çš„æ•ˆæœ',
                    fantasy: 'è¶…ç°å®æ„Ÿéœ€è¦æ¢¦å¹»å…‰çº¿å’Œé²œè‰³è‰²å½©ï¼Œæ‘‡è‡‚é•œå¤´å±•ç°åœºæ™¯å®å¤§'
                };
                return analyses[type] || 'æ ¹æ®åœºæ™¯ç‰¹ç‚¹ï¼Œå»ºè®®ä½¿ç”¨ç”µå½±çº§é•œå¤´è¯­è¨€å’Œè‰²å½©é£æ ¼';
            }
        };

        // ========== æ™ºèƒ½åˆ†é•œç”Ÿæˆå™¨ ==========
        
        const storyboardGenerator = {
            generate(sceneDesc, duration, lensTags, lightTags, colorTags, mood) {
                const shotCount = Math.max(2, Math.ceil(duration / 5));
                const shots = [];
                
                // è§£æåœºæ™¯å…ƒç´ 
                const elements = this.parseSceneElements(sceneDesc);
                
                // ç”Ÿæˆåˆ†é•œç»“æ„
                for (let i = 0; i < shotCount; i++) {
                    const progress = i / (shotCount - 1); // 0 åˆ° 1
                    const shot = this.createShot(i, progress, elements, lensTags, lightTags, colorTags, mood, duration);
                    shots.push(shot);
                }
                
                return shots;
            },
            
            parseSceneElements(desc) {
                // æå–åœºæ™¯ä¸­çš„å…³é”®å…ƒç´ 
                const elements = {
                    subjects: [],
                    locations: [],
                    actions: [],
                    times: []
                };
                
                // ç®€å•å…³é”®è¯æå–
                const subjectKeywords = ['å®‡èˆªå‘˜', 'æƒ…ä¾£', 'æˆ˜å£«', 'å¥³å­©', 'ç”·å­©', 'äººç‰©', 'ä¸»è§’', 'æœºå™¨äºº', 'åŠ¨ç‰©'];
                const locationKeywords = ['ç«æ˜Ÿ', 'åœ°çƒ', 'åŸå¸‚', 'æ£®æ—', 'æµ·æ´‹', 'æˆ¿é—´', 'è¡—é“', 'å±±é¡¶', 'æµ·è¾¹'];
                const actionKeywords = ['è¡Œèµ°', 'å¥”è·‘', 'ç«™ç«‹', 'çœ‹ç€', 'é£ç¿”', 'æ¸¸æ³³', 'æˆ˜æ–—', 'æ‹¥æŠ±'];
                const timeKeywords = ['æ—¥è½', 'æ—¥å‡º', 'å¤œæ™š', 'é»„æ˜', 'æ¸…æ™¨'];
                
                subjectKeywords.forEach(k => { if (desc.includes(k)) elements.subjects.push(k); });
                locationKeywords.forEach(k => { if (desc.includes(k)) elements.locations.push(k); });
                actionKeywords.forEach(k => { if (desc.includes(k)) elements.actions.push(k); });
                timeKeywords.forEach(k => { if (desc.includes(k)) elements.times.push(k); });
                
                return elements;
            },
            
            createShot(index, progress, elements, lensTags, lightTags, colorTags, mood, totalDuration) {
                const shotDuration = Math.floor(totalDuration / Math.ceil(totalDuration / 5));
                const lens = lensTags[index % lensTags.length] || 'wide_shot';
                const light = lightTags[index % lightTags.length] || 'cinematic_lighting';
                const color = colorTags[index % colorTags.length] || 'teal_orange';
                
                // æ ¹æ®è¿›åº¦ç¡®å®šé•œå¤´ç±»å‹å’Œæ–‡æ¡ˆ
                let type, script, cameraMove;
                
                if (progress === 0) {
                    // å¼€åœºé•œå¤´
                    type = 'å¼€åœºé•œå¤´ Â· Establishing Shot';
                    cameraMove = lens === 'aerial_shot' ? 'èˆªæ‹ä¸‹é™' : 'ç¼“æ…¢æ¨è¿‘';
                    script = this.generateOpeningScript(elements, lens, light);
                } else if (progress === 1) {
                    // ç»“å°¾é•œå¤´
                    type = 'ç»“å°¾é•œå¤´ Â· Closing Shot';
                    cameraMove = lens === 'close_up' ? 'ç‰¹å†™å®šæ ¼' : 'ç¼“æ…¢æ‹‰è¿œ';
                    script = this.generateClosingScript(elements, lens, light);
                } else if (progress < 0.5) {
                    // å‘å±•
                    type = 'å‘å±•é•œå¤´ Â· Development';
                    cameraMove = lens === 'tracking' ? 'è·Ÿéšä¸»ä½“' : 'å¹³ç¨³æ¨ªç§»';
                    script = this.generateDevelopmentScript(elements, lens, light, progress);
                } else {
                    // é«˜æ½®/è½¬æŠ˜
                    type = 'é«˜æ½®é•œå¤´ Â· Climax';
                    cameraMove = lens === 'handheld' ? 'æ‰‹æŒæ™ƒåŠ¨' : 'å¿«é€Ÿæ¨è¿‘';
                    script = this.generateClimaxScript(elements, lens, light);
                }
                
                return {
                    number: index + 1,
                    type,
                    duration: shotDuration,
                    script,
                    cameraMove,
                    lens,
                    light,
                    color,
                    lensName: zhTranslations[lens] || lens,
                    lightName: zhTranslations[light] || light,
                    colorName: zhTranslations[color] || color
                };
            },
            
            generateOpeningScript(elements, lens, light) {
                const subject = elements.subjects[0] || 'ä¸»ä½“';
                const location = elements.locations[0] || 'åœºæ™¯';
                const time = elements.times[0] || '';
                
                const scripts = [
                    `${time}çš„${location}ï¼Œ${zhTranslations[lens]}ç¼“ç¼“å±•ç°åœºæ™¯å…¨è²Œï¼Œ${zhTranslations[light]}ä¸ºç”»é¢å¥ å®šåŸºè°ƒ`,
                    `é•œå¤´ä»è¿œå¤„ç¼“ç¼“æ¨è¿›ï¼Œ${location}çš„${time}æ™¯è‰²é€æ¸æ¸…æ™°ï¼Œ${subject}è¿›å…¥ç”»é¢`,
                    `ä»¥${zhTranslations[lens]}å¼€åœºï¼Œ${location}åœ¨${zhTranslations[light]}ä¸‹å‘ˆç°å‡ºç‹¬ç‰¹çš„æ°›å›´`
                ];
                return scripts[Math.floor(Math.random() * scripts.length)];
            },
            
            generateDevelopmentScript(elements, lens, light, progress) {
                const subject = elements.subjects[0] || 'ä¸»ä½“';
                const action = elements.actions[0] || 'ç§»åŠ¨';
                
                return `${zhTranslations[lens]}æ•æ‰${subject}${action}çš„ç¬é—´ï¼Œ${zhTranslations[light]}çªå‡ºä¸»ä½“è½®å»“ï¼Œæ¨è¿›å™äº‹å‘å±•`;
            },
            
            generateClimaxScript(elements, lens, light) {
                const subject = elements.subjects[0] || 'ä¸»ä½“';
                return `æƒ…ç»ªè¾¾åˆ°é¡¶ç‚¹ï¼Œ${zhTranslations[lens]}èšç„¦${subject}çš„å…³é”®ç¬é—´ï¼Œ${zhTranslations[light]}å¼ºåŒ–æˆå‰§å¼ åŠ›`;
            },
            
            generateClosingScript(elements, lens, light) {
                const location = elements.locations[0] || 'åœºæ™¯';
                return `ä»¥${zhTranslations[lens]}æ”¶å°¾ï¼Œ${zhTranslations[light]}å‡åä¸»é¢˜ï¼Œç•™ä¸‹æ·±åˆ»å°è±¡`;
            }
        };

        // ========== ä¸­æ–‡ç¿»è¯‘æ˜ å°„ ==========
        
        const zhTranslations = {
            wide_shot: 'å…¨æ™¯', close_up: 'ç‰¹å†™', extreme_close_up: 'æç‰¹å†™', medium_shot: 'ä¸­æ™¯',
            tracking: 'è·Ÿè¸ª', dolly_in: 'æ¨è½¨', crane_shot: 'æ‘‡è‡‚', handheld: 'æ‰‹æŒ',
            aerial_shot: 'èˆªæ‹', steadicam: 'æ–¯å¦å°¼åº·', over_shoulder: 'è¿‡è‚©', point_of_view: 'ä¸»è§‚è§†è§’',
            telephoto: 'é•¿ç„¦', low_angle: 'ä½è§’åº¦',
            cinematic_lighting: 'ç”µå½±å…‰', golden_hour: 'é»„é‡‘æ—¶åˆ»', blue_hour: 'è“è°ƒæ—¶åˆ»', neon_light: 'éœ“è™¹å…‰',
            volumetric_light: 'ä½“ç§¯å…‰', rim_light: 'è½®å»“å…‰', natural_light: 'è‡ªç„¶å…‰', soft_light: 'æŸ”å…‰',
            hard_light: 'ç¡¬å…‰', chiaroscuro: 'æ˜æš—å¯¹æ¯”', god_rays: 'ä¸Šå¸ä¹‹å…‰', practical_light: 'å®æ™¯å…‰æº',
            teal_orange: 'é’æ©™è‰²è°ƒ', orange_teal: 'æ©™é’è‰²è°ƒ', film_grain: 'èƒ¶ç‰‡é¢—ç²’', high_contrast: 'é«˜å¯¹æ¯”',
            low_contrast: 'ä½å¯¹æ¯”', desaturated: 'ä½é¥±å’Œ', vibrant: 'é²œè‰³é¥±å’Œ', warm_tones: 'æš–è‰²è°ƒ',
            cool_tones: 'å†·è‰²è°ƒ', monochrome: 'é»‘ç™½', sepia: 'å¤å¤ sepia', cyberpunk_neon: 'èµ›åšéœ“è™¹',
            soft_focus: 'æŸ”ç„¦'
        };

        // ========== é¡µé¢äº¤äº’å‡½æ•° ==========

        // AI åˆ†æåœºæ™¯
        async function analyzeScene() {
            const desc = document.getElementById('scene-desc').value.trim();
            if (!desc) {
                alert('è¯·å…ˆè¾“å…¥åœºæ™¯æè¿°');
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½
            document.getElementById('analyze-loading').style.display = 'block';
            document.getElementById('analyze-result').style.display = 'none';
            document.getElementById('analyze-btn').disabled = true;
            
            // æ¨¡æ‹Ÿ AI åˆ†æå»¶è¿Ÿ
            await new Promise(r => setTimeout(r, 1500));
            
            // æ‰§è¡Œåˆ†æ
            const result = sceneAnalyzer.analyze(desc);
            
            // æ›´æ–° UI
            updateTagsWithAIResult(result);
            updateMoodSelect(result.mood);
            
            // æ˜¾ç¤ºåˆ†æç»“æœ
            displayAnalyzeResult(result);
            
            // éšè—åŠ è½½
            document.getElementById('analyze-loading').style.display = 'none';
            document.getElementById('analyze-btn').disabled = false;
        }
        
        function displayAnalyzeResult(result) {
            const html = `
                <div class="analyze-result">
                    <h4>ğŸ¯ AI åˆ†æç»“æœï¼ˆç½®ä¿¡åº¦ ${result.confidence}%ï¼‰</h4>
                    <div class="analyze-item">
                        <span class="icon">ğŸ¬</span>
                        <div class="content">
                            <div class="label">åœºæ™¯ç±»å‹</div>
                            <div class="value">${result.sceneTypeName}</div>
                        </div>
                    </div>
                    <div class="analyze-item">
                        <span class="icon">ğŸ¥</span>
                        <div class="content">
                            <div class="label">æ¨èé•œå¤´</div>
                            <div class="value">${result.lens.map(l => zhTranslations[l] || l).join('ã€')}</div>
                        </div>
                    </div>
                    <div class="analyze-item">
                        <span class="icon">ğŸ’¡</span>
                        <div class="content">
                            <div class="label">æ¨èå…‰å½±</div>
                            <div class="value">${result.light.map(l => zhTranslations[l] || l).join('ã€')}</div>
                        </div>
                    </div>
                    <div class="analyze-item">
                        <span class="icon">ğŸ¨</span>
                        <div class="content">
                            <div class="label">æ¨èè‰²å½©</div>
                            <div class="value">${result.color.map(c => zhTranslations[c] || c).join('ã€')}</div>
                        </div>
                    </div>
                    <div class="analyze-item">
                        <span class="icon">ğŸ’­</span>
                        <div class="content">
                            <div class="label">åˆ†æå»ºè®®</div>
                            <div class="value">${result.analysis}</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('analyze-result').innerHTML = html;
            document.getElementById('analyze-result').style.display = 'block';
        }
        
        function updateTagsWithAIResult(result) {
            // æ¸…é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.tag').forEach(tag => {
                tag.classList.remove('active', 'ai-selected');
            });
            
            // è®¾ç½® AI æ¨èçš„æ ‡ç­¾
            result.lens.forEach(lens => {
                const tag = document.querySelector(`#lens-tags .tag[data-en="${lens}"]`);
                if (tag) tag.classList.add('active', 'ai-selected');
            });
            
            result.light.forEach(light => {
                const tag = document.querySelector(`#light-tags .tag[data-en="${light}"]`);
                if (tag) tag.classList.add('active', 'ai-selected');
            });
            
            result.color.forEach(color => {
                const tag = document.querySelector(`#color-tags .tag[data-en="${color}"]`);
                if (tag) tag.classList.add('active', 'ai-selected');
            });
        }
        
        function updateMoodSelect(mood) {
            document.getElementById('mood').value = mood;
        }

        // ç”Ÿæˆæç¤ºè¯å’Œåˆ†é•œ
        function generatePrompt() {
            const desc = document.getElementById('scene-desc').value.trim();
            const duration = parseInt(document.getElementById('duration').value);
            const ratio = document.getElementById('aspect-ratio').value;
            const mood = document.getElementById('mood').value;
            
            if (!desc) {
                alert('è¯·å…ˆè¾“å…¥åœºæ™¯æè¿°');
                return;
            }
            
            // è·å–é€‰ä¸­çš„æ ‡ç­¾
            const lensTags = Array.from(document.querySelectorAll('#lens-tags .tag.active')).map(t => t.dataset.en);
            const lightTags = Array.from(document.querySelectorAll('#light-tags .tag.active')).map(t => t.dataset.en);
            const colorTags = Array.from(document.querySelectorAll('#color-tags .tag.active')).map(t => t.dataset.en);
            
            // å¦‚æœæ²¡æœ‰é€‰æ‹©æ ‡ç­¾ï¼Œä½¿ç”¨é»˜è®¤å€¼
            if (lensTags.length === 0) lensTags.push('wide_shot');
            if (lightTags.length === 0) lightTags.push('cinematic_lighting');
            if (colorTags.length === 0) colorTags.push('teal_orange');
            
            // ç”Ÿæˆæç¤ºè¯
            const positivePrompt = generatePositivePrompt(desc, lensTags, lightTags, colorTags, mood);
            const negativePrompt = "blurry, low quality, distorted, deformed, bad anatomy, watermark, text, logo, cropped, out of frame, worst quality, low resolution, oversaturated, underexposed, overexposed, cartoon, anime, painting, 3d render, cgi";
            
            document.getElementById('positive-output').textContent = positivePrompt;
            document.getElementById('negative-output').textContent = negativePrompt;
            
            // ç”Ÿæˆåˆ†é•œ
            const shots = storyboardGenerator.generate(desc, duration, lensTags, lightTags, colorTags, mood);
            renderStoryboard(shots);
        }
        
        function generatePositivePrompt(desc, lens, light, color, mood) {
            const moodWords = {
                epic: 'epic, grand, majestic, awe-inspiring',
                mysterious: 'mysterious, enigmatic, atmospheric, moody',
                romantic: 'romantic, tender, intimate, emotional',
                dark: 'dark, ominous, foreboding, sinister',
                powerful: 'powerful, intense, dramatic, impactful',
                warm: 'warm, cozy, inviting, comforting',
                melancholic: 'melancholic, somber, wistful, nostalgic',
                tense: 'tense, suspenseful, thrilling, gripping',
                dreamy: 'dreamy, ethereal, surreal, otherworldly',
                energetic: 'energetic, dynamic, vibrant, lively'
            };
            
            return `${desc}, ${lens.join(', ')}, ${light.join(', ')}, ${color.join(', ')}, ${moodWords[mood] || mood}, 8k resolution, photorealistic, cinematic composition, film grain, professional color grading, highly detailed, masterpiece, best quality`;
        }
        
        function renderStoryboard(shots) {
            const html = shots.map(shot => `
                <div class="shot">
                    <div class="shot-number">${shot.number}</div>
                    <div class="shot-content">
                        <div class="shot-header">
                            <span class="shot-type">${shot.type}</span>
                            <span class="shot-duration">â±ï¸ ${shot.duration}ç§’</span>
                        </div>
                        <div class="shot-script">${shot.script}</div>
                        <div class="shot-tech">
                            <span>ğŸ¥ ${shot.lensName}</span>
                            <span>ğŸ’¡ ${shot.lightName}</span>
                            <span>ğŸ¨ ${shot.colorName}</span>
                            <span>ğŸ“¹ ${shot.cameraMove}</span>
                        </div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('storyboard').innerHTML = html;
        }

        // åŠ è½½12ç§é£æ ¼æ¨¡æ¿
        function loadTemplate(type) {
            const templates = {
                sci_fi_epic: {
                    desc: 'å²è¯—çº§ç§‘å¹»åœºæ™¯ï¼Œå·¨å‹å¤ªç©ºæˆ˜èˆ°ç©¿è¶Šæ˜Ÿäº‘ï¼Œæ•°åƒè‰˜å°å‹é£èˆ¹ä¼´éšé£è¡Œï¼Œè¿œå¤„æ˜¯æ­£åœ¨çˆ†ç‚¸çš„æ’æ˜Ÿï¼Œé‡‘è‰²å’Œç´«è‰²çš„å…‰èŠ’ç…§äº®æ•´ä¸ªç”»é¢ï¼ŒIMAXçº§åˆ«çš„è§†è§‰éœ‡æ’¼',
                    mood: 'epic',
                    lens: ['wide_shot', 'aerial_shot', 'tracking'],
                    light: ['volumetric_light', 'rim_light', 'god_rays'],
                    color: ['orange_teal', 'high_contrast', 'vibrant']
                },
                cyberpunk_night: {
                    desc: 'èµ›åšæœ‹å…‹é›¨å¤œï¼Œä¸»è§’ç«™åœ¨éœ“è™¹é—ªçƒçš„è¡—é“ä¸­å¤®ï¼Œå‘¨å›´æ˜¯é«˜è€¸å…¥äº‘çš„æ‘©å¤©å¤§æ¥¼ï¼Œå…¨æ¯å¹¿å‘Šç‰ŒæŠ•å°„ç€ç²‰è‰²å’Œé’è‰²çš„å…‰èŠ’ï¼Œé›¨æ°´åœ¨åœ°é¢å½¢æˆå€’å½±',
                    mood: 'mysterious',
                    lens: ['tracking', 'medium_shot', 'close_up'],
                    light: ['neon_light', 'practical_light', 'hard_light'],
                    color: ['cyberpunk_neon', 'high_contrast', 'vibrant']
                },
                documentary_nature: {
                    desc: 'éæ´²å¤§è‰åŸæ—¥å‡ºæ—¶åˆ†ï¼Œé›„ç‹®ç«™åœ¨é‡‘è‰²è‰ä¸›ä¸­çš„å²©çŸ³ä¸Šï¼Œè¿œå¤„æ˜¯æ­£åœ¨è¿å¾™çš„è§’é©¬ç¾¤ï¼Œæ™¨å…‰é€è¿‡è–„é›¾å½¢æˆä¸è¾¾å°”æ•ˆåº”ï¼Œå›½å®¶åœ°ç†çº§åˆ«çš„é‡ç”ŸåŠ¨ç‰©æ‘„å½±',
                    mood: 'warm',
                    lens: ['telephoto', 'close_up', 'wide_shot'],
                    light: ['golden_hour', 'natural_light', 'soft_light'],
                    color: ['warm_tones', 'film_grain', 'vibrant']
                },
                music_video_dance: {
                    desc: 'ä¸“ä¸šèˆè€…åœ¨å·¥ä¸šé£ä»“åº“ä¸­è¡¨æ¼”ï¼Œå½©è‰²èšå…‰ç¯ä»ä¸Šæ–¹æŠ•å°„ï¼ŒçƒŸé›¾æ•ˆæœè¥é€ æ°›å›´æ„Ÿï¼Œé«˜é€Ÿæ‘„å½±æ•æ‰èˆè€…çš„æ¯ä¸€ä¸ªåŠ¨ä½œï¼ŒèŠ‚å¥æ„Ÿå¼ºçƒˆçš„å‰ªè¾‘é£æ ¼',
                    mood: 'energetic',
                    lens: ['tracking', 'medium_shot', 'low_angle'],
                    light: ['practical_light', 'rim_light', 'hard_light'],
                    color: ['vibrant', 'high_contrast', 'cyberpunk_neon']
                },
                romantic_drama: {
                    desc: 'æƒ…ä¾£åœ¨æµ·è¾¹æ‚¬å´–ä¸Šç›¸æ‹¥ï¼Œæ—¥è½æ—¶åˆ†çš„é‡‘è‰²é˜³å…‰æ´’åœ¨ä»–ä»¬èº«ä¸Šï¼Œæµ·é£è½»è½»å¹èµ·å¥³å­©çš„å¤´å‘ï¼Œè¿œå¤„æ˜¯æ³¢å…‰ç²¼ç²¼çš„æµ·é¢ï¼Œæµªæ¼«å”¯ç¾çš„æ°›å›´',
                    mood: 'romantic',
                    lens: ['close_up', 'medium_shot', 'dolly_in'],
                    light: ['golden_hour', 'soft_light', 'rim_light'],
                    color: ['warm_tones', 'film_grain', 'soft_focus']
                },
                horror_thriller: {
                    desc: 'åºŸå¼ƒç²¾ç¥ç—…é™¢çš„èµ°å»Šï¼Œé—ªçƒçš„è§å…‰ç¯å‘å‡ºå—¡å—¡å£°ï¼Œé˜´å½±ä¸­ä¼¼ä¹æœ‰ä»€ä¹ˆåœ¨ç§»åŠ¨ï¼Œæ‰‹æŒæ‘„å½±å¢å¼ºçœŸå®æ„Ÿï¼Œå‹æŠ‘ææ€–çš„æ°›å›´è®©äººçª’æ¯',
                    mood: 'dark',
                    lens: ['handheld', 'close_up', 'extreme_close_up'],
                    light: ['practical_light', 'chiaroscuro', 'hard_light'],
                    color: ['desaturated', 'high_contrast', 'monochrome']
                },
                action_sequence: {
                    desc: 'åŸå¸‚é«˜é€Ÿå…¬è·¯ä¸Šçš„æ±½è½¦è¿½é€æˆ˜ï¼Œä¸»è§’é©¾é©¶è·‘è½¦åœ¨è½¦æµä¸­ç©¿æ¢­ï¼Œç«èŠ±å››æº…ï¼Œè½®èƒæ‘©æ“¦äº§ç”ŸçƒŸé›¾ï¼Œå¤šæœºä½å¿«é€Ÿå‰ªè¾‘å±•ç°é€Ÿåº¦æ„Ÿ',
                    mood: 'powerful',
                    lens: ['tracking', 'wide_shot', 'handheld'],
                    light: ['practical_light', 'hard_light', 'neon_light'],
                    color: ['orange_teal', 'high_contrast', 'vibrant']
                },
                period_drama: {
                    desc: '1920å¹´ä»£ä¸Šæµ·æ»©çš„è±ªåèˆä¼šï¼Œç©¿ç€æ——è¢çš„å¥³å£«å’Œè¥¿è£…é©å±¥çš„ç»…å£«åœ¨æ°´æ™¶åŠç¯ä¸‹ç¿©ç¿©èµ·èˆï¼Œå¤å¤çš„è£…æ½¢å’Œæš–è‰²è°ƒç¯å…‰è¥é€ æ€€æ—§æ°›å›´',
                    mood: 'warm',
                    lens: ['wide_shot', 'crane_shot', 'medium_shot'],
                    light: ['practical_light', 'soft_light', 'warm_tones'],
                    color: ['sepia', 'warm_tones', 'film_grain']
                },
                underwater_world: {
                    desc: 'æ·±æµ·çŠç‘šç¤ç”Ÿæ€ç³»ç»Ÿï¼Œäº”å½©æ–‘æ–“çš„çƒ­å¸¦é±¼ç¾¤åœ¨çŠç‘šé—´ç©¿æ¢­ï¼Œé˜³å…‰ä»æ°´é¢ç©¿é€å½¢æˆå…‰æŸï¼Œæ½œæ°´å‘˜åœ¨è¿œå¤„è§‚å¯Ÿæµ·é¾Ÿï¼Œè“è‰²è°ƒçš„æ¢¦å¹»æµ·åº•ä¸–ç•Œ',
                    mood: 'mysterious',
                    lens: ['wide_shot', 'tracking', 'close_up'],
                    light: ['volumetric_light', 'natural_light', 'god_rays'],
                    color: ['cool_tones', 'vibrant', 'blue_hour']
                },
                space_odyssey: {
                    desc: 'å®‡èˆªå‘˜åœ¨å›½é™…ç©ºé—´ç«™å¤–è¿›è¡Œå¤ªç©ºè¡Œèµ°ï¼Œåœ°çƒåœ¨èƒŒæ™¯ä¸­ç¼“ç¼“è½¬åŠ¨ï¼Œé˜³å…‰ä»åœ°å¹³çº¿å‡èµ·ç…§äº®å®‡èˆªæœï¼Œæµ©ç€šå®‡å®™ä¸­çš„å­¤ç‹¬ä¸å£®ä¸½',
                    mood: 'epic',
                    lens: ['wide_shot', 'medium_shot', 'point_of_view'],
                    light: ['rim_light', 'hard_light', 'volumetric_light'],
                    color: ['cool_tones', 'high_contrast', 'desaturated']
                },
                fantasy_magic: {
                    desc: 'å¤è€æ£®æ—ä¸­çš„é­”æ³•ä»ªå¼ï¼Œå·«å¸ˆæŒ¥èˆæ³•æ–å¬å”¤å‡ºé‡‘è‰²é­”æ³•é˜µï¼Œè¤ç«è™«èˆ¬çš„å…‰ç‚¹åœ¨ç©ºä¸­é£èˆï¼Œç¥ç§˜çš„ç¬¦æ–‡åœ¨åœ°é¢ä¸Šå‘å…‰ï¼Œå¥‡å¹»å²è¯—èˆ¬çš„åœºæ™¯',
                    mood: 'dreamy',
                    lens: ['wide_shot', 'crane_shot', 'tracking'],
                    light: ['god_rays', 'volumetric_light', 'practical_light'],
                    color: ['warm_tones', 'vibrant', 'golden_hour']
                },
                noir_detective: {
                    desc: '1940å¹´ä»£æ´›æ‰çŸ¶çš„ç§äººä¾¦æ¢åŠå…¬å®¤ï¼Œç™¾å¶çª—å°†é˜³å…‰åˆ‡æˆæ¡çº¹æŠ•å°„åœ¨çƒŸé›¾ä¸­ï¼Œä¾¦æ¢ååœ¨åŠå…¬æ¡ŒåæŠ½ç€çƒŸæ–—ï¼Œé»‘ç™½é«˜å¯¹æ¯”åº¦çš„å…‰å½±è¥é€ æ‚¬ç–‘æ°›å›´',
                    mood: 'mysterious',
                    lens: ['medium_shot', 'low_angle', 'close_up'],
                    light: ['chiaroscuro', 'practical_light', 'hard_light'],
                    color: ['monochrome', 'high_contrast', 'desaturated']
                }
            };
            
            const template = templates[type];
            if (template) {
                document.getElementById('scene-desc').value = template.desc;
                document.getElementById('mood').value = template.mood;
                
                // æ›´æ–°æ ‡ç­¾
                document.querySelectorAll('.tag').forEach(tag => {
                    tag.classList.remove('active', 'ai-selected');
                });
                
                // è®¾ç½®æ¨¡æ¿æ ‡ç­¾
                template.lens.forEach(l => {
                    const tag = document.querySelector(`#lens-tags .tag[data-en="${l}"]`);
                    if (tag) tag.classList.add('active', 'ai-selected');
                });
                template.light.forEach(l => {
                    const tag = document.querySelector(`#light-tags .tag[data-en="${l}"]`);
                    if (tag) tag.classList.add('active', 'ai-selected');
                });
                template.color.forEach(c => {
                    const tag = document.querySelector(`#color-tags .tag[data-en="${c}"]`);
                    if (tag) tag.classList.add('active', 'ai-selected');
                });
                
                // é«˜äº®å½“å‰æŒ‰é’®
                document.querySelectorAll('.template-btn-12').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
            }
        }

        // å¤åˆ¶åŠŸèƒ½
        function copyText(elementId) {
            const text = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            });
        }
        
        function copyStoryboard() {
            const shots = document.querySelectorAll('.shot');
            let text = 'ğŸ¬ åˆ†é•œè„šæœ¬\n\n';
            shots.forEach(shot => {
                const num = shot.querySelector('.shot-number').textContent;
                const type = shot.querySelector('.shot-type').textContent;
                const script = shot.querySelector('.shot-script').textContent;
                const tech = shot.querySelector('.shot-tech').textContent;
                text += `é•œå¤´ ${num}: ${type}\n${script}\n${tech}\n\n`;
            });
            navigator.clipboard.writeText(text).then(() => alert('åˆ†é•œè„šæœ¬å·²å¤åˆ¶'));
        }

        // æ ‡ç­¾ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.tag').forEach(tag => {
            tag.addEventListener('click', function() {
                this.classList.toggle('active');
            });
        });
    </script>
</body>
</html>
